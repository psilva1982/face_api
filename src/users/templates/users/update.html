{% extends 'base_app.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}

<div class="mb-3">
    <h1 class="h3 d-inline align-middle">{{ object.email }}</h1>
</div>

<div class="row">
    <div class="col-md-4">
        <div class="card mb-3">
            <div class="card-body text-center">
                <img src="{%if object.avatar %}{{object.avatar.url}}{% else %}{% static 'img/default-avatar.jpg' %}{% endif %}" alt="{{ object.email }}" class="img-fluid rounded-circle mb-2" width="128" height="128">
                <h5 class="card-title mb-0">
                    <span class="profile_username">{{ object.name|default:"" }}</span>
                </h5>
                <div class="text-muted mb-2">{{ object.email }}</div>
            </div>
            {% crispy form %}
        </div>
    </div>
</div>
{% endblock %}

{% block toast_content %}
  {% include 'components/toast.html' %}
{% endblock %}

{% block extra_js %}

<script>
    const messages = "{{ messages|safe }}"
    console.log(messages);

    /**
    function updateProfile(e) {
        const username = $('#id_name').val();
        e.preventDefault();
        $.ajax({
            type: "POST",
            data: $('form').serialize(),
            success: function(data) {
                if (!(data['success'])) {
                $('form').replaceWith(data['form']);
                $('form').bind('submit', updateProfile);
                }
                else {
                    showToast('Profile updated!');
                    $('.profile_username').text(username);
                }
            },
            error: function () {
                form.find('.error-message').show();
            }
        });
    }

    // Document ready
    $(function() {
        $('form').submit(updateProfile);
    });
    */

</script>

{% endblock%}
